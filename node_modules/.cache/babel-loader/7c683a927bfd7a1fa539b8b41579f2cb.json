{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Contract } from \"@ethersproject/contracts\";\nimport { abis } from \"@my-app/contracts\";\nimport { useCall } from \"@usedapp/core\";\nimport { parseUnits } from \"ethers/lib/utils\";\nimport { useEffect } from \"react\";\nimport { ROUTER_ADDRESS } from \"../config\";\nexport const getAvailableTokens = pools => pools.reduce((prev, curr) => {\n  prev[curr.token0Address] = curr.token0Name;\n  prev[curr.token1Address] = curr.token1Name;\n  return prev;\n}, {});\nexport const getCounterpartTokens = (pools, fromToken) => pools.filter(cur => cur.token0Address === fromToken || cur.token1Address).reduce((prev, curr) => {\n  if (curr.token0Address === fromToken) {\n    prev[curr.token1Address] = curr.token1Name;\n  } else if (curr.token1Address === fromToken) {\n    prev[curr.token0Address] = curr.token0Name;\n  }\n\n  return prev;\n}, {});\nexport const findPoolByTokens = (pools, fromToken, toToken) => {\n  if (!Array.isArray(pools) || !fromToken || !toToken) return undefined;\n  return pools.find(cur => cur.token0Address === fromToken && cur.token1Address === toToken || cur.token1Address === fromToken && cur.token0Address === toToken);\n};\nexport const isOperationPending = operationState => operationState.status === \"PendingSignature\" || operationState.status === \"Mining\";\nexport const isOperationFailed = operationState => operationState.status === \"Fail\" || operationState.status === \"Exception\";\nexport const isOperationSucceeded = operationState => operationState.status === \"Success\";\nexport const getFailureMessage = (swapApproveState, swapExecuteState) => {\n  if (isOperationPending(swapApproveState) || isOperationPending(swapExecuteState)) {\n    return undefined;\n  }\n\n  if (isOperationFailed(swapApproveState)) {\n    return \"Approval failed - \" + swapApproveState.errorMessage;\n  }\n\n  if (isOperationFailed(swapExecuteState)) {\n    return \"Swap failed - \" + swapExecuteState.errorMessage;\n  }\n\n  return undefined;\n};\nexport const getSuccessMessage = (swapApproveState, swapExecuteState) => {\n  if (isOperationPending(swapExecuteState) || isOperationPending(swapApproveState)) {\n    return undefined;\n  }\n\n  if (isOperationSucceeded(swapExecuteState)) {\n    return \"Swap executed successfully\";\n  }\n\n  if (isOperationSucceeded(swapApproveState)) {\n    return \"Approval successful\";\n  }\n\n  return undefined;\n};\nexport const useAmountsOut = (pairAddress, amountIn, fromToken, toToken) => {\n  _s();\n\n  var _useCall;\n\n  const isValidAmountIn = amountIn.gt(parseUnits(\"0\"));\n  const areParamsValid = !!(pairAddress && isValidAmountIn && fromToken && toToken);\n  const {\n    error,\n    value\n  } = (_useCall = useCall(areParamsValid && {\n    contract: new Contract(ROUTER_ADDRESS, abis.router02),\n    method: \"getAmountsOut\",\n    args: [amountIn, [fromToken, toToken]]\n  })) !== null && _useCall !== void 0 ? _useCall : {};\n  return error ? parseUnits(\"0\") : value === null || value === void 0 ? void 0 : value.amounts[1];\n};\n\n_s(useAmountsOut, \"O1/dri1quJgQ3w+3QCAa7O9sZ2w=\", false, function () {\n  return [useCall];\n});\n\nexport const useOnClickOutside = (ref, handler) => {\n  _s2();\n\n  useEffect(() => {\n    const listener = event => {\n      // Do nothing if clicking ref's element or descendent elements\n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n\n      handler(event);\n    };\n\n    document.addEventListener(\"mousedown\", listener);\n    document.addEventListener(\"touchstart\", listener);\n    return () => {\n      document.removeEventListener(\"mousedown\", listener);\n      document.removeEventListener(\"touchstart\", listener);\n    };\n  }, [ref, handler]);\n};\n\n_s2(useOnClickOutside, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"names":["Contract","abis","useCall","parseUnits","useEffect","ROUTER_ADDRESS","getAvailableTokens","pools","reduce","prev","curr","token0Address","token0Name","token1Address","token1Name","getCounterpartTokens","fromToken","filter","cur","findPoolByTokens","toToken","Array","isArray","undefined","find","isOperationPending","operationState","status","isOperationFailed","isOperationSucceeded","getFailureMessage","swapApproveState","swapExecuteState","errorMessage","getSuccessMessage","useAmountsOut","pairAddress","amountIn","isValidAmountIn","gt","areParamsValid","error","value","contract","router02","method","args","amounts","useOnClickOutside","ref","handler","listener","event","current","contains","target","document","addEventListener","removeEventListener"],"sources":["/Users/Cedar/Desktop/unisap2.0/packages/react-app/src/utils/helpers.js"],"sourcesContent":["\nimport { Contract } from \"@ethersproject/contracts\";\nimport { abis } from \"@my-app/contracts\";\nimport { useCall } from \"@usedapp/core\";\nimport { parseUnits } from \"ethers/lib/utils\";\nimport { useEffect } from \"react\";\n\nimport { ROUTER_ADDRESS } from \"../config\";\n\nexport const getAvailableTokens = (pools) =>\n  pools.reduce((prev, curr) => {\n    prev[curr.token0Address] = curr.token0Name;\n    prev[curr.token1Address] = curr.token1Name;\n    return prev;\n  }, {});\n\nexport const getCounterpartTokens = (pools, fromToken) => pools\n  .filter((cur) => cur.token0Address === fromToken || cur.token1Address)\n  .reduce((prev, curr) => {\n    if (curr.token0Address === fromToken) {\n      prev[curr.token1Address] = curr.token1Name;\n    } else if (curr.token1Address === fromToken) {\n      prev[curr.token0Address] = curr.token0Name;\n    }\n    return prev;\n  }, {});\n\n\nexport const findPoolByTokens = (pools, fromToken, toToken) => {\n  if (!Array.isArray(pools) || !fromToken || !toToken) return undefined;\n\n  return pools.find((cur) =>\n    (cur.token0Address === fromToken && cur.token1Address === toToken) ||\n    (cur.token1Address === fromToken && cur.token0Address === toToken)\n  );\n};\n\nexport const isOperationPending = (operationState) => \n  operationState.status === \"PendingSignature\" || operationState.status === \"Mining\";\nexport const isOperationFailed = (operationState) =>\noperationState.status === \"Fail\" || operationState.status === \"Exception\";\nexport const isOperationSucceeded = (operationState) =>\noperationState.status === \"Success\";\n\nexport const getFailureMessage = (swapApproveState, swapExecuteState) => {\n  if (isOperationPending(swapApproveState) || isOperationPending(swapExecuteState)) {\n    return undefined;\n  }\n\n  if (isOperationFailed(swapApproveState)) {\n    return \"Approval failed - \" + swapApproveState.errorMessage;\n  }\n\n  if (isOperationFailed(swapExecuteState)) {\n    return \"Swap failed - \" + swapExecuteState.errorMessage;\n  }\n\n  return undefined;\n};\n\nexport const getSuccessMessage = (swapApproveState, swapExecuteState) => {\n  if (isOperationPending(swapExecuteState) ||isOperationPending(swapApproveState)) {\n    return undefined;\n  }\n\n  if (isOperationSucceeded(swapExecuteState)) {\n    return \"Swap executed successfully\";\n  }\n\n  if (isOperationSucceeded(swapApproveState)) {\n    return \"Approval successful\";\n  }\n\n  return undefined;\n};\n\nexport const useAmountsOut = (pairAddress, amountIn, fromToken, toToken) => {\n  const isValidAmountIn = amountIn.gt(parseUnits(\"0\"));\n  const areParamsValid = !!(pairAddress && isValidAmountIn && fromToken && toToken);\n\n  const { error, value } =\n    useCall(\n      areParamsValid && {\n        contract: new Contract(ROUTER_ADDRESS, abis.router02),\n        method: \"getAmountsOut\",\n        args: [amountIn, [fromToken, toToken]],\n      }\n    ) ?? {};\n  return error ? parseUnits(\"0\") : value?.amounts[1];\n}\n\nexport const useOnClickOutside = (ref, handler) => {\n  useEffect(() => {\n    const listener = (event) => {\n      // Do nothing if clicking ref's element or descendent elements\n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n      handler(event);\n    };\n\n    document.addEventListener(\"mousedown\", listener);\n    document.addEventListener(\"touchstart\", listener);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", listener);\n      document.removeEventListener(\"touchstart\", listener);\n    };\n  }, [ref, handler]);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}